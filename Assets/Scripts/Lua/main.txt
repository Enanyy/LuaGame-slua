require "UnityClass"
require "WindowManager"

function main()

	TestProtobuf()

	WindowManager:Initialize()
end

function TestProtobuf()

	local person_pb =  require 'Protol.person_pb'
  
    local msg = person_pb.Person()
    msg.id = 10
	msg.age = 30
	msg.name = "aaaaa"
	msg.email = "bbbbbb"

	msg.header.cmd = 11
	msg.header.seq = 1000

	msg.array:append(1)                              
	msg.array:append(2)   

	local pb_data = msg:SerializeToString()   

    local msg1 = person_pb.Person()
	msg1:ParseFromString(pb_data)
	--tostring 不会打印默认值
	print('person_pb decoder: age: '..msg1.age..'\nemail: '..msg1.email)
end